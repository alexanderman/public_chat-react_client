(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{128:function(e,t){},134:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(9),c=n.n(o),s=(n(94),n(13)),i=(n(95),n(176)),l=n(166),u=n(167),m=n(44),g=n(4),d=n(165),p=n(42),f=Object(g.a)((function(e){return{root:{color:e.palette.getContrastText(p.a[500]),borderColor:e.palette.getContrastText(p.a[500])}}}))(i.a),b=Object(d.a)({toolbar:{justifyContent:"space-between"}}),h=function(e){var t=e.user,n=e.logout,a=b(),o=t?"Welcome ".concat(t.username):"Public Chat";return r.a.createElement(l.a,{position:"static"},r.a.createElement(u.a,{className:a.toolbar},r.a.createElement(m.a,null,o),t?r.a.createElement(f,{variant:"outlined",onClick:n},"Logout"):null))},v=n(168),E=n(169),j=n(170),w=n(171),x=n(175),O=n(173),y=Object(d.a)({container:{display:"flex",marginTop:"2rem",alignItems:"center"},title:{opacity:.6,marginBottom:"0.5rem"},actions:{padding:"1rem",paddingTop:0}}),k=function(e){var t=e.onLogin,n=y(),o=Object(a.useState)(""),c=Object(s.a)(o,2),l=c[0],u=c[1],m=Object(a.useState)(!1),g=Object(s.a)(m,2),d=g[0],p=g[1],f=function(){var e=l.length<4||!/^\w+$/.test(l);p(e),!e&&t&&t(l)};return r.a.createElement(v.a,{maxWidth:"xs",className:n.container},r.a.createElement(E.a,null,r.a.createElement(j.a,{subheader:"Please enter nickname at least four characters long, use only alphanumeric characters"}),r.a.createElement(w.a,null,r.a.createElement(x.a,{error:d,onKeyPress:function(e){"Enter"===e.key&&f()},helperText:d?"invalid characters or too short":"",value:l,fullWidth:!0,variant:"outlined",label:"nickname",onChange:function(e){return u(e.target.value)}})),r.a.createElement(O.a,{className:n.actions},r.a.createElement(i.a,{variant:"contained",color:"primary",fullWidth:!0,onClick:f},"Login"))))},_=n(43),C=n(174),A=n(180),B=Object(d.a)({container:{padding:"1rem",margin:0,display:"flex",flexDirection:"row"},textField:{border:0,marginRight:"0.5rem"},button:{}}),N=function(e){var t=e.sendMessage,n=B(),o=Object(a.useState)(""),c=Object(s.a)(o,2),l=c[0],u=c[1],m=!l.length,g=function(){l.length>0&&(u(""),t(l))};return r.a.createElement(r.a.Fragment,null,r.a.createElement(C.a,{light:!0}),r.a.createElement(v.a,{className:n.container},r.a.createElement(x.a,{fullWidth:!0,className:n.textField,variant:"filled",onKeyPress:function(e){"Enter"===e.key&&g()},value:l,onChange:function(e){u(e.target.value)},placeholder:"enter your message"}),r.a.createElement(i.a,{variant:"outlined",disabled:m,color:"primary",onClick:g},r.a.createElement(A.a,null))))},T=n(178),M=n(179),R=n(79),S=Object(d.a)((function(e){return{container:{display:"flex",flexDirection:"row",marginBottom:"1rem"},avatar:{marginRight:"0.5rem"},text:{marginTop:"0.5rem",marginRight:"2rem",borderRadius:"1.5rem",padding:"1rem",borderTopLeftRadius:0}}})),W=Object(d.a)((function(e){return{container:{display:"flex",flexDirection:"row-reverse",marginBottom:"1rem"},avatar:{marginLeft:"0.5rem"},text:{backgroundColor:e.palette.info.light,marginTop:"0.5rem",marginLeft:"2rem",borderRadius:"1.5rem",padding:"1rem",borderTopRightRadius:0}}}));var D,F=function(e){var t=e.user,n=t.avatarUrl,a=t.username,o=e.message,c=e.isMe?W():S(),s=function(e){var t=e.trim().split(/\s+/);return((t[0][0]||"")+(t[1]?t[1][0]:"")).toUpperCase()}(a);return r.a.createElement(v.a,{className:c.container},r.a.createElement(T.a,{title:a},r.a.createElement(M.a,{alt:a,className:c.avatar,src:n},s)),r.a.createElement(R.a,{elevation:3,className:c.text},o))},L=n(76),U=n.n(L),H=n(77),K=n.n(H),P=(n(133),Object(d.a)({container:{display:"flex",maxWidth:"700px",flex:1,flexDirection:"column",padding:0,minHeight:"100px",backgroundColor:"#ffffff"},scrollbar:{padding:"1rem 0",paddingBottom:0}})),J=function(e){var t=e.children,n=P(),o=Object(a.useState)(!0),c=Object(s.a)(o,2),i=c[0],l=c[1],u=Object(a.useRef)(null);return Object(a.useEffect)((function(){i&&(u.current._container.scrollTop=u.current._container.scrollHeight)}),[t]),r.a.createElement(K.a,{ref:u,className:n.scrollbar,onScrollUp:function(){return l(!1)},onYReachEnd:function(){return l(!0)},options:{suppressScrollX:!0}},t)},I=Object(d.a)({container:{display:"flex",maxWidth:"700px",flex:1,flexDirection:"column",padding:0,minHeight:"100px",backgroundColor:"#ffffff"},scrollbar:{padding:"1rem 0",paddingBottom:0}}),X=function(e){var t=e.user,n=I(),o=Object(a.useState)([]),c=Object(s.a)(o,2),i=c[0],l=c[1];Object(a.useEffect)((function(){return console.log("subscribe to messages"),D=function(e){var t=U()("http://local.pubchat.com:4000/");t.on("message",e),console.log("socket connecting..."),t.emit("get_prev_messages"),t.on("prev_messages",e);return{sendMessage:function(e,n){t.emit("message",[{user:e,message:n}])},closeConnection:function(){t.disconnect(),console.log("socket disconnected")}}}(u),function(){console.log("unsubscribe from messages"),D.closeConnection()}}),[]);var u=function(e){l((function(t){return[].concat(Object(_.a)(t),Object(_.a)(e))}))};return r.a.createElement(v.a,{square:"true",className:n.container},r.a.createElement(J,null,i.map((function(e,n){return r.a.createElement(F,Object.assign({},e,{isMe:(a=e,a.user.username===t.username),key:n}));var a}))),r.a.createElement(N,{sendMessage:function(e){D.sendMessage(t,e),l((function(n){return[].concat(Object(_.a)(n),[{user:t,message:e}])}))}}))},Y=["https://s3.amazonaws.com/spectrumnews-web-assets/wp-content/uploads/2018/11/13154625/20181112-SHANK3monkey-844.jpg","https://ichef.bbci.co.uk/news/1024/branded_news/E9DF/production/_96317895_gettyimages-164067218.jpg","https://cdn.mos.cms.futurecdn.net/bQgcMwEnyhFu6ASuUFrtsn.jpg","https://frontiersinblog.files.wordpress.com/2018/06/frontiers-in-ecology-evolution-ape-human-bonobo-muscles.jpg","https://static01.nyt.com/images/2015/09/23/multimedia/science-take-apes/science-take-apes-superJumbo-v3.jpg","https://www.pametnica.rs/wp-content/uploads/2015/08/Babun-1024x684.jpg","https://lh5.ggpht.com/-_6PJW4fB1lk/Tn8YuyO-XCI/AAAAAAAAAlE/RH3TnXKYqbs/s72-c/Babun%252520Memiliki%252520Kemampuan%252520Adaptif%252520Untuk%252520Beranalogi%252520Seperti%252520Manusia%25255B5%25255D.jpg?imgmax=800","https://www.sanovnik.org/wp-content/uploads/2015/04/babun-540x380.jpg","https://post.medicalnewstoday.com/wp-content/uploads/sites/3/2020/02/322868_1100-1100x628.jpg","https://img.webmd.com/dtmcms/live/webmd/consumer_assets/site_images/article_thumbnails/slideshows/dog_breed_health_issues_slideshow/1800x1200_dog_breed_health_issues_slideshow.jpg"];var q=function(){return Y[Math.floor(Math.random()*Y.length)]};var $=function(){var e=Object(a.useState)(null),t=Object(s.a)(e,2),n=t[0],o=t[1];return r.a.createElement("div",{className:"App"},r.a.createElement(h,{user:n,logout:function(){o(null)}}),n?r.a.createElement(X,{user:n}):r.a.createElement(k,{onLogin:function(e){o({username:e,avatarUrl:q()})}}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.Fragment,null,r.a.createElement($,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},89:function(e,t,n){e.exports=n(134)},94:function(e,t,n){},95:function(e,t,n){}},[[89,1,2]]]);
//# sourceMappingURL=main.41584630.chunk.js.map